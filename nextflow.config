/*
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    nf-core/evaluation_summary Nextflow config file
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    Default config options for all compute environments
----------------------------------------------------------------------------------------
*/

// Global default params
params {
    // Input/Output
    results        = null
    outdir         = "${projectDir}/results"

    // Reference options
    organism       = "mus_musculus"
    census_version = "2024-07-01"
    ref_keys       = ["subclass", "class", "family", "global"]
    mapping_file   = null
    color_mapping_file = null

    // Filtering options
    subsample_ref  = 500
    cutoff         = 0.0
    reference      = "whole_cortex"
    method         = "scvi"
    remove_outliers = null

    // Max resource options (can be overridden in profiles)
    max_cpus   = 16
    max_memory = '128.GB'
    max_time   = '240.h'
}

// Load base.config by default for all pipelines
includeConfig 'conf/base.config'

// Load modules.config for DSL2 module specific options
includeConfig 'conf/modules.config'

// Profiles
profiles {
    conda {
        conda.enabled = true
        docker.enabled = false
        singularity.enabled = false
    }
    docker {
        docker.enabled = true
        conda.enabled = false
        singularity.enabled = false
    }
    singularity {
        singularity.enabled = true
        singularity.autoMounts = true
        conda.enabled = false
        docker.enabled = false
    }
    test {
        includeConfig 'conf/test.config'
    }
}

// Nextflow settings
nextflow {
    clean {
        afterRun = true
    }
}

// Export environment variables for scripts
env {
    PYTHONNOUSERSITE = 1
}

// Capture exit codes from upstream processes when piping
process.shell = ['/bin/bash', '-euo', 'pipefail']

// Timestamp output directories
def trace_timestamp = new java.util.Date().format('yyyy-MM-dd_HH-mm-ss')

// Pipeline info
manifest {
    name            = 'nf-core/evaluation_summary'
    author          = 'Your Name'
    homePage        = 'https://github.com/nf-core/evaluation_summary'
    description     = 'Pipeline for summarizing benchmarking results from cell-type classification methods'
    mainScript      = 'main.nf'
    nextflowVersion = '!>=23.04.0'
    version         = '1.0.0'
}
